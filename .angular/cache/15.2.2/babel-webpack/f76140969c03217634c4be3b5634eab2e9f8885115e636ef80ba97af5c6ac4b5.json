{"ast":null,"code":"import _asyncToGenerator from \"E:/work/pigallery2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { AuthenticationService } from '../../../model/network/authentication.service';\nimport { NavigationService } from '../../../model/navigation.service';\nimport { NotificationService } from '../../../model/notification.service';\nimport { SettingsService } from '../settings.service';\nimport { WebConfig } from '../../../../../common/config/private/WebConfig';\nimport { JobDTOUtils } from '../../../../../common/entities/job/JobDTO';\nimport { ScheduledJobsService } from '../scheduled-jobs.service';\nimport { UntypedFormControl } from '@angular/forms';\nimport { ConfigPriority } from '../../../../../common/config/public/ClientConfig';\nimport { Utils } from '../../../../../common/Utils';\nimport { UserRoles } from '../../../../../common/entities/UserDTO';\nimport { WebConfigClassBuilder } from '../../../../../../node_modules/typeconfig/src/decorators/builders/WebConfigClassBuilder';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../model/network/authentication.service\";\nimport * as i2 from \"../../../model/navigation.service\";\nimport * as i3 from \"../../../model/notification.service\";\nimport * as i4 from \"../settings.service\";\nimport * as i5 from \"../scheduled-jobs.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"./settings-entry/settings-entry.component\";\nimport * as i9 from \"../workflow/progress/job-progress.settings.component\";\nimport * as i10 from \"../workflow/button/job-button.settings.component\";\nconst _c0 = [\"settingsForm\"];\nfunction TemplateComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"label\", 22);\n    i0.ɵɵi18n(3, 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 24);\n    i0.ɵɵlistener(\"ngModelChange\", function TemplateComponent_div_7_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.states.value.enabled = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"for\", ctx_r1.ConfigPath + \".enabled\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", ctx_r1.ConfigPath + \".enabled\")(\"disabled\", ctx_r1.inProgress)(\"ngModel\", ctx_r1.states.value.enabled);\n  }\n}\nfunction TemplateComponent_ng_container_13_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nconst _c7 = function (a0, a2) {\n  return {\n    rStates: a0,\n    topLevel: true,\n    confPath: a2,\n    skipJobs: true\n  };\n};\nfunction TemplateComponent_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TemplateComponent_ng_container_13_ng_container_1_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    const _r7 = i0.ɵɵreference(26);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r7)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction2(2, _c7, ctx_r2.states, ctx_r2.ConfigPath));\n  }\n}\nfunction TemplateComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵi18n(3, 27);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.Name, \" \");\n  }\n}\nfunction TemplateComponent_div_16_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nconst _c10 = function (a0) {\n  return {\n    uiJob: a0\n  };\n};\nfunction TemplateComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, TemplateComponent_div_16_ng_container_1_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    const _r9 = i0.ɵɵreference(28);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r9)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c10, ctx_r4.states.tags == null ? null : ctx_r4.states.tags.uiJob));\n  }\n}\nfunction TemplateComponent_div_22_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction TemplateComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, TemplateComponent_div_22_ng_container_1_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    const _r11 = i0.ɵɵreference(30);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r11)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(2, _c10, ctx_r5.states.tags == null ? null : ctx_r5.states.tags.uiJob));\n  }\n}\nfunction TemplateComponent_div_23_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction TemplateComponent_div_23_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction TemplateComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"hr\");\n    i0.ɵɵtemplate(2, TemplateComponent_div_23_ng_container_2_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵtemplate(3, TemplateComponent_div_23_ng_container_3_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    const _r9 = i0.ɵɵreference(28);\n    const _r11 = i0.ɵɵreference(30);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r9)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(4, _c10, ctx_r6.states.tags == null ? null : ctx_r6.states.tags.uiJob));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r11)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(6, _c10, ctx_r6.states.tags == null ? null : ctx_r6.states.tags.uiJob));\n  }\n}\nfunction TemplateComponent_ng_template_25_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const rStates_r20 = i0.ɵɵnextContext().rStates;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", rStates_r20.description, \" \");\n  }\n}\nfunction TemplateComponent_ng_template_25_ng_container_1_ng_container_1_app_settings_entry_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-settings-entry\", 32);\n  }\n  if (rf & 2) {\n    const ck_r28 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r32 = i0.ɵɵnextContext();\n    const confPath_r23 = ctx_r32.confPath;\n    const rStates_r20 = ctx_r32.rStates;\n    i0.ɵɵproperty(\"name\", confPath_r23 + \"_\" + ck_r28)(\"ngModel\", rStates_r20 == null ? null : rStates_r20.value.__state[ck_r28]);\n  }\n}\nfunction TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_div_1_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nconst _c11 = function (a0, a1) {\n  return {\n    rStates: a0,\n    confPath: a1\n  };\n};\nfunction TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 6)(2, \"h5\", 35);\n    i0.ɵɵelement(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_div_1_ng_container_5_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ck_r28 = i0.ɵɵnextContext(3).$implicit;\n    const ctx_r38 = i0.ɵɵnextContext();\n    const rStates_r20 = ctx_r38.rStates;\n    const confPath_r23 = ctx_r38.confPath;\n    const ctx_r34 = i0.ɵɵnextContext();\n    const _r7 = i0.ɵɵreference(26);\n    i0.ɵɵproperty(\"id\", ctx_r34.ConfigPath + \".\" + ck_r28);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMapInterpolate1(\"oi oi-\", rStates_r20 == null ? null : rStates_r20.value.__state[ck_r28].tags == null ? null : rStates_r20.value.__state[ck_r28].tags.uiIcon, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (rStates_r20 == null ? null : rStates_r20.value.__state[ck_r28].tags == null ? null : rStates_r20.value.__state[ck_r28].tags.name) || ck_r28, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r7)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction2(7, _c11, rStates_r20.value.__state[ck_r28], confPath_r23 + \".\" + ck_r28));\n  }\n}\nfunction TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_ng_container_2_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 10)(2, \"div\", 36)(3, \"h5\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 12);\n    i0.ɵɵelement(6, \"hr\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 37);\n    i0.ɵɵtemplate(8, TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_ng_container_2_ng_container_8_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ck_r28 = i0.ɵɵnextContext(3).$implicit;\n    const ctx_r40 = i0.ɵɵnextContext();\n    const rStates_r20 = ctx_r40.rStates;\n    const confPath_r23 = ctx_r40.confPath;\n    i0.ɵɵnextContext();\n    const _r7 = i0.ɵɵreference(26);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate((rStates_r20 == null ? null : rStates_r20.value.__state[ck_r28].tags == null ? null : rStates_r20.value.__state[ck_r28].tags.name) || ck_r28);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r7)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction2(3, _c11, rStates_r20.value.__state[ck_r28], confPath_r23 + \".\" + ck_r28));\n  }\n}\nfunction TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_div_1_Template, 6, 10, \"div\", 33);\n    i0.ɵɵtemplate(2, TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_ng_container_2_Template, 9, 6, \"ng-container\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const topLevel_r21 = i0.ɵɵnextContext(3).topLevel;\n    const ctx_r31 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", topLevel_r21 && ctx_r31.enableNesting);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !topLevel_r21 || !ctx_r31.enableNesting);\n  }\n}\nfunction TemplateComponent_ng_template_25_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_25_ng_container_1_ng_container_1_app_settings_entry_1_Template, 1, 2, \"app-settings-entry\", 31);\n    i0.ɵɵtemplate(2, TemplateComponent_ng_template_25_ng_container_1_ng_container_1_ng_container_2_Template, 3, 2, \"ng-container\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ck_r28 = i0.ɵɵnextContext().$implicit;\n    const ctx_r44 = i0.ɵɵnextContext();\n    const topLevel_r21 = ctx_r44.topLevel;\n    const rStates_r20 = ctx_r44.rStates;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ck_r28 !== \"enabled\" || !topLevel_r21) && !rStates_r20.value.__state[ck_r28].isConfigType);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", rStates_r20.value.__state[ck_r28].isConfigType);\n  }\n}\nfunction TemplateComponent_ng_template_25_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_25_ng_container_1_ng_container_1_Template, 3, 2, \"ng-container\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ck_r28 = ctx.$implicit;\n    const rStates_r20 = i0.ɵɵnextContext().rStates;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(rStates_r20.value.__state[ck_r28].shouldHide && rStates_r20.value.__state[ck_r28].shouldHide()));\n  }\n}\nfunction TemplateComponent_ng_template_25_div_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction TemplateComponent_ng_template_25_div_2_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction TemplateComponent_ng_template_25_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_25_div_2_ng_container_1_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵtemplate(2, TemplateComponent_ng_template_25_div_2_ng_container_2_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const rStates_r20 = i0.ɵɵnextContext().rStates;\n    i0.ɵɵnextContext();\n    const _r9 = i0.ɵɵreference(28);\n    const _r11 = i0.ɵɵreference(30);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r9)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(4, _c10, rStates_r20.tags == null ? null : rStates_r20.tags.uiJob));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r11)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(6, _c10, rStates_r20.tags == null ? null : rStates_r20.tags.uiJob));\n  }\n}\nfunction TemplateComponent_ng_template_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, TemplateComponent_ng_template_25_div_0_Template, 2, 1, \"div\", 28);\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_25_ng_container_1_Template, 2, 1, \"ng-container\", 29);\n    i0.ɵɵtemplate(2, TemplateComponent_ng_template_25_div_2_Template, 3, 8, \"div\", 8);\n  }\n  if (rf & 2) {\n    const rStates_r20 = ctx.rStates;\n    const skipJobs_r22 = ctx.skipJobs;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", rStates_r20.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.getKeys(rStates_r20));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (rStates_r20.tags == null ? null : rStates_r20.tags.uiJob) && !skipJobs_r22);\n  }\n}\nfunction TemplateComponent_ng_template_27_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const job_r51 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", job_r51.description, \" \");\n  }\n}\nfunction TemplateComponent_ng_template_27_ng_container_1_app_settings_job_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r57 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-settings-job-button\", 40);\n    i0.ɵɵlistener(\"jobError\", function TemplateComponent_ng_template_27_ng_container_1_app_settings_job_button_2_Template_app_settings_job_button_jobError_0_listener($event) {\n      i0.ɵɵrestoreView(_r57);\n      const ctx_r56 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r56.error = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const job_r51 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"soloRun\", true)(\"allowParallelRun\", false)(\"danger\", job_r51.job.includes(\"Reset\"))(\"jobName\", job_r51.job);\n  }\n}\nfunction TemplateComponent_ng_template_27_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_27_ng_container_1_div_1_Template, 2, 1, \"div\", 28);\n    i0.ɵɵtemplate(2, TemplateComponent_ng_template_27_ng_container_1_app_settings_job_button_2_Template, 1, 4, \"app-settings-job-button\", 39);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const job_r51 = ctx.$implicit;\n    const ctx_r50 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", job_r51.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !job_r51.relevant || job_r51.relevant(i0.ɵɵpipeBind1(3, 2, ctx_r50.settingsService.settings)));\n  }\n}\nfunction TemplateComponent_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_27_ng_container_1_Template, 4, 4, \"ng-container\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const uiJob_r49 = ctx.uiJob;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", uiJob_r49);\n  }\n}\nfunction TemplateComponent_ng_template_29_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"hr\", 41)(2, \"app-settings-job-progress\", 42);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const job_r61 = i0.ɵɵnextContext().$implicit;\n    const ctx_r62 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"progress\", ctx_r62.getProgress(job_r61));\n  }\n}\nfunction TemplateComponent_ng_template_29_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_29_ng_container_1_ng_container_1_Template, 3, 1, \"ng-container\", 8);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const job_r61 = ctx.$implicit;\n    const ctx_r60 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r60.getProgress(job_r61) && !job_r61.hideProgress && (!job_r61.relevant || job_r61.relevant(i0.ɵɵpipeBind1(2, 1, ctx_r60.settingsService.settings))));\n  }\n}\nfunction TemplateComponent_ng_template_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, TemplateComponent_ng_template_29_ng_container_1_Template, 3, 3, \"ng-container\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const uiJob_r59 = ctx.uiJob;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", uiJob_r59);\n  }\n}\nconst _c12 = [\"*\"];\nexport let TemplateComponent = /*#__PURE__*/(() => {\n  class TemplateComponent {\n    constructor(authService, navigation, notification, settingsService, jobsService) {\n      this.authService = authService;\n      this.navigation = navigation;\n      this.notification = notification;\n      this.settingsService = settingsService;\n      this.jobsService = jobsService;\n      this.nestedConfigs = [];\n      this.inProgress = false;\n      this.error = null;\n      this.changed = false;\n      this.states = {};\n      this.subscription = null;\n      this.settingsSubscription = null;\n      this.onNewSettings = s => {\n        this.states = this.sliceFN(s.clone());\n        const instrument = (st, parent) => {\n          const shouldHide = state => {\n            return () => {\n              if (state.volatile) {\n                return true;\n              }\n              if (state.tags && (state.tags.relevant && !state.tags.relevant(parent.value) || state.tags.secret)) {\n                return true;\n              }\n              // if all sub elements are hidden, hide the parent too.\n              if (state.isConfigType) {\n                if (state.value && state.value.__state && Object.keys(state.value.__state).findIndex(k => !st.value.__state[k].shouldHide()) === -1) {\n                  return true;\n                }\n              }\n              const forcedVisibility = !(state.tags?.priority > this.settingsService.configPriority ||\n              //if this value should not change in Docker, lets hide it\n              this.settingsService.configPriority === ConfigPriority.basic && state.tags?.dockerSensitive && this.settingsService.settings.value.Environment.isDocker);\n              if (state.isConfigArrayType) {\n                for (let i = 0; i < state.value?.length; ++i) {\n                  for (const k of Object.keys(state.value[i].__state)) {\n                    if (!Utils.equalsFilter(state.value[i]?.__state[k]?.value, state.default[i] ? state.default[i][k] : undefined, ['default', '__propPath', '__created', '__prototype', '__rootConfig'])) {\n                      return false;\n                    }\n                  }\n                }\n                return !forcedVisibility;\n              }\n              return !forcedVisibility && Utils.equalsFilter(state.value, state.default, ['__propPath', '__created', '__prototype', '__rootConfig']) && Utils.equalsFilter(state.original, state.default, ['__propPath', '__created', '__prototype', '__rootConfig']);\n            };\n          };\n          st.shouldHide = shouldHide(st);\n          st.onChange = this.onOptionChange;\n          st.rootConfig = parent?.value;\n          if (typeof st.value !== 'undefined') {\n            st.original = Utils.clone(st.value);\n          }\n          if (st.isConfigType) {\n            for (const k of Object.keys(st.value.__state)) {\n              instrument(st.value.__state[k], st);\n            }\n          }\n          if (st.isConfigArrayType) {\n            for (let i = 0; i < st.value?.length; ++i) {\n              for (const k of Object.keys(st.value[i].__state)) {\n                instrument(st.value[i].__state[k], st);\n              }\n            }\n          }\n        };\n        instrument(this.states, null);\n        this.icon = this.states.tags?.uiIcon;\n      };\n      this.onOptionChange = () => {\n        setTimeout(() => {\n          const settingsSame = state => {\n            if (typeof state === 'undefined') {\n              return true;\n            }\n            if (typeof state.original === 'object') {\n              return Utils.equalsFilter(state.value, state.original, ['__propPath', '__created', '__prototype', '__rootConfig', '__state']);\n            }\n            if (typeof state.original !== 'undefined') {\n              return state.value === state.original;\n            }\n            const keys = Object.keys(state);\n            for (const key of keys) {\n              if (settingsSame(state[key]) === false) {\n                return false;\n              }\n            }\n            return true;\n          };\n          this.changed = !settingsSame(this.states);\n        }, 0);\n      };\n    }\n    ngOnChanges() {\n      if (!this.ConfigPath) {\n        this.setSliceFN(c => ({\n          value: c,\n          isConfigType: true,\n          type: WebConfig\n        }));\n      } else {\n        this.setSliceFN(c => c.__state[this.ConfigPath]);\n      }\n      this.name = this.states.tags?.name || this.ConfigPath;\n      this.nestedConfigs = [];\n      if (this.enableNesting) {\n        for (const key of this.getKeys(this.states)) {\n          if (this.states.value.__state[key].isConfigType) {\n            this.nestedConfigs.push({\n              id: this.ConfigPath + '.' + key,\n              name: this.states?.value.__state[key].tags?.name,\n              icon: this.states?.value.__state[key].tags?.uiIcon,\n              visible: () => !(this.states.value.__state[key].shouldHide && this.states.value.__state[key].shouldHide())\n            });\n          }\n        }\n      }\n    }\n    ngOnInit() {\n      if (!this.authService.isAuthenticated() || this.authService.user.value.role < UserRoles.Admin) {\n        this.navigation.toLogin();\n        return;\n      }\n      this.getSettings();\n      // TODO: fix after this issue is fixed: https://github.com/angular/angular/issues/24818\n      this.subscription = this.form.valueChanges.subscribe(() => {\n        this.onOptionChange();\n      });\n    }\n    ngOnDestroy() {\n      if (this.subscription != null) {\n        this.subscription.unsubscribe();\n      }\n      if (this.settingsSubscription != null) {\n        this.settingsSubscription.unsubscribe();\n      }\n    }\n    setSliceFN(sliceFN) {\n      if (sliceFN) {\n        this.sliceFN = sliceFN;\n        this.settingsSubscription = this.settingsService.settings.subscribe(this.onNewSettings);\n      }\n    }\n    get Name() {\n      return this.changed ? this.name + '*' : this.name;\n    }\n    get Changed() {\n      return this.changed;\n    }\n    get HasAvailableSettings() {\n      return !this.states?.shouldHide || !this.states?.shouldHide();\n    }\n    reset() {\n      this.getSettings();\n    }\n    save() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.inProgress = true;\n        _this.error = '';\n        try {\n          const state = WebConfigClassBuilder.attachInterface(_this.states.value).toJSON();\n          yield _this.settingsService.updateSettings(state, _this.ConfigPath);\n          yield _this.getSettings();\n          _this.notification.success(_this.Name + ' ' + $localize`settings saved`, $localize`Success`);\n          _this.inProgress = false;\n          return true;\n        } catch (err) {\n          console.error(err);\n          if (err.message) {\n            _this.error = err.message;\n          }\n        }\n        _this.inProgress = false;\n        return false;\n      })();\n    }\n    getSettings() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        yield _this2.settingsService.getSettings();\n        _this2.changed = false;\n      })();\n    }\n    getKeys(states) {\n      if (states.keys) {\n        return states.keys;\n      }\n      const s = states.value.__state;\n      const keys = Object.keys(s).sort((a, b) => {\n        if ((s[a].isConfigType || s[a].isConfigArrayType) !== (s[b].isConfigType || s[b].isConfigArrayType)) {\n          if (s[a].isConfigType || s[a].isConfigArrayType) {\n            return 1;\n          } else {\n            return -1;\n          }\n        }\n        if (s[a].tags?.priority !== s[b].tags?.priority) {\n          return s[a].tags?.priority - s[b].tags?.priority;\n        }\n        if (a === 'enabled' && b !== 'enabled') {\n          return -1;\n        } else if (b === 'enabled') {\n          return 1;\n        }\n        return (s[a].tags?.name || a).localeCompare(s[b].tags?.name || b);\n      });\n      states.keys = keys;\n      return states.keys;\n    }\n    getProgress(uiJob) {\n      if (!uiJob.config) {\n        uiJob.config = this.jobsService.getDefaultConfig(uiJob.job);\n      }\n      return this.jobsService.progress.value[JobDTOUtils.getHashName(uiJob.job, uiJob.config || {})];\n    }\n  }\n  TemplateComponent.ɵfac = function TemplateComponent_Factory(t) {\n    return new (t || TemplateComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.NavigationService), i0.ɵɵdirectiveInject(i3.NotificationService), i0.ɵɵdirectiveInject(i4.SettingsService), i0.ɵɵdirectiveInject(i5.ScheduledJobsService));\n  };\n  TemplateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TemplateComponent,\n    selectors: [[\"app-settings-template\"]],\n    viewQuery: function TemplateComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.form = _t.first);\n      }\n    },\n    inputs: {\n      ConfigPath: \"ConfigPath\",\n      enableNesting: \"enableNesting\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c12,\n    decls: 31,\n    vars: 15,\n    consts: function () {\n      let i18n_1;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_3651383146061106629$$SRC_FRONTEND_APP_UI_SETTINGS_TEMPLATE_TEMPLATE_COMPONENT_TS_2 = goog.getMsg(\"Save \");\n        i18n_1 = MSG_EXTERNAL_3651383146061106629$$SRC_FRONTEND_APP_UI_SETTINGS_TEMPLATE_TEMPLATE_COMPONENT_TS_2;\n      } else {\n        i18n_1 = $localize`Save `;\n      }\n      let i18n_3;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_148529425276807027$$SRC_FRONTEND_APP_UI_SETTINGS_TEMPLATE_TEMPLATE_COMPONENT_TS_4 = goog.getMsg(\"Reset \");\n        i18n_3 = MSG_EXTERNAL_148529425276807027$$SRC_FRONTEND_APP_UI_SETTINGS_TEMPLATE_TEMPLATE_COMPONENT_TS_4;\n      } else {\n        i18n_3 = $localize`Reset `;\n      }\n      let i18n_5;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_4816216590591222133$$SRC_FRONTEND_APP_UI_SETTINGS_TEMPLATE_TEMPLATE_COMPONENT_TS__6 = goog.getMsg(\"Enabled\");\n        i18n_5 = MSG_EXTERNAL_4816216590591222133$$SRC_FRONTEND_APP_UI_SETTINGS_TEMPLATE_TEMPLATE_COMPONENT_TS__6;\n      } else {\n        i18n_5 = $localize`Enabled`;\n      }\n      let i18n_8;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_3574891459850265938$$SRC_FRONTEND_APP_UI_SETTINGS_TEMPLATE_TEMPLATE_COMPONENT_TS__9 = goog.getMsg(\"config is not supported with these settings.\");\n        i18n_8 = MSG_EXTERNAL_3574891459850265938$$SRC_FRONTEND_APP_UI_SETTINGS_TEMPLATE_TEMPLATE_COMPONENT_TS__9;\n      } else {\n        i18n_8 = $localize`config is not supported with these settings.`;\n      }\n      return [[1, \"form-horizontal\", 3, \"id\"], [\"settingsForm\", \"ngForm\"], [1, \"card\", \"mb-4\"], [1, \"card-header\"], [1, \"d-inline-block\", \"mb-0\"], [\"class\", \"float-end p-0\", 4, \"ngIf\"], [1, \"card-body\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", 3, \"hidden\"], [4, \"ngIf\"], [\"class\", \"panel-info\", 4, \"ngIf\"], [1, \"row\", \"mt-2\"], [\"class\", \"col\", 4, \"ngIf\"], [1, \"col\"], [1, \"btn\", \"btn-success\", \"float-end\", 3, \"disabled\", \"click\"], i18n_1, [1, \"btn\", \"btn-secondary\", \"float-end\", 3, \"disabled\", \"click\"], i18n_3, [\"Recursion\", \"\"], [\"JobTemplate\", \"\"], [\"JobProcessTemplate\", \"\"], [1, \"float-end\", \"p-0\"], [1, \"form-check\", \"form-switch\"], [1, \"form-check-label\", 3, \"for\"], i18n_5, [\"type\", \"checkbox\", \"role\", \"switch\", \"name\", \"enabled\", 1, \"form-check-input\", 3, \"id\", \"disabled\", \"ngModel\", \"ngModelChange\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [1, \"panel-info\"], i18n_8, [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [3, \"name\", \"ngModel\", 4, \"ngIf\"], [3, \"name\", \"ngModel\"], [\"class\", \"card mt-2 mb-2\", 3, \"id\", 4, \"ngIf\"], [1, \"card\", \"mt-2\", \"mb-2\", 3, \"id\"], [1, \"card-title\"], [1, \"col-auto\"], [1, \"mt-2\"], [1, \"mb-2\"], [\"class\", \"mt-2 mb-1 mb-md-0 mt-md-0 float-left me-2\", 3, \"soloRun\", \"allowParallelRun\", \"danger\", \"jobName\", \"jobError\", 4, \"ngIf\"], [1, \"mt-2\", \"mb-1\", \"mb-md-0\", \"mt-md-0\", \"float-left\", \"me-2\", 3, \"soloRun\", \"allowParallelRun\", \"danger\", \"jobName\", \"jobError\"], [1, \"mt-1\"], [1, \"d-block\", \"mb-2\", 3, \"progress\"]];\n    },\n    template: function TemplateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"form\", 0, 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h5\", 4);\n        i0.ɵɵelement(5, \"span\");\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, TemplateComponent_div_7_Template, 5, 4, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"strong\");\n        i0.ɵɵtext(11, \"Error: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, TemplateComponent_ng_container_13_Template, 2, 5, \"ng-container\", 8);\n        i0.ɵɵtemplate(14, TemplateComponent_div_14_Template, 4, 1, \"div\", 9);\n        i0.ɵɵelementStart(15, \"div\", 10);\n        i0.ɵɵtemplate(16, TemplateComponent_div_16_Template, 2, 4, \"div\", 11);\n        i0.ɵɵelementStart(17, \"div\", 12)(18, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function TemplateComponent_Template_button_click_18_listener() {\n          return ctx.save();\n        });\n        i0.ɵɵi18n(19, 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function TemplateComponent_Template_button_click_20_listener() {\n          return ctx.reset();\n        });\n        i0.ɵɵi18n(21, 16);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(22, TemplateComponent_div_22_Template, 2, 4, \"div\", 8);\n        i0.ɵɵtemplate(23, TemplateComponent_div_23_Template, 4, 8, \"div\", 8);\n        i0.ɵɵprojection(24);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(25, TemplateComponent_ng_template_25_Template, 3, 3, \"ng-template\", null, 17, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(27, TemplateComponent_ng_template_27_Template, 2, 1, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(29, TemplateComponent_ng_template_29_Template, 2, 1, \"ng-template\", null, 19, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(1);\n        i0.ɵɵproperty(\"id\", ctx.ConfigPath);\n        i0.ɵɵadvance(5);\n        i0.ɵɵclassMapInterpolate1(\"oi oi-\", ctx.icon, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.Name, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.states.value.enabled !== undefined);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.error);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.states.value.enabled !== false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.states.value.enabled === false);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", (ctx.states.tags == null ? null : ctx.states.tags.uiJob) && !(ctx.states.tags == null ? null : ctx.states.tags.uiJob[0].description));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", _r0.form.invalid || !ctx.changed || ctx.inProgress);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.changed || ctx.inProgress);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", (ctx.states.tags == null ? null : ctx.states.tags.uiJob) && !(ctx.states.tags == null ? null : ctx.states.tags.uiJob[0].description));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.states.tags == null ? null : ctx.states.tags.uiJob) && (ctx.states.tags == null ? null : ctx.states.tags.uiJob[0].description));\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i6.NgTemplateOutlet, i7.ɵNgNoValidate, i7.CheckboxControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.NgModel, i7.NgForm, i8.SettingsEntryComponent, i9.JobProgressComponent, i10.JobButtonComponent, i6.AsyncPipe],\n    styles: [\".title[_ngcontent-%COMP%]{margin-left:-5px}.btn[_ngcontent-%COMP%]{margin-left:10px}.form-check-input[_ngcontent-%COMP%]:focus{border-color:var(--bs-success);box-shadow:var(--bs-success)}.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--bs-success)}.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:focus{background-image:url(\\\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'><circle r='3' fill='%23a3cfbb'/></svg>\\\")}.form-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-image:url(\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e\\\")}.changed-settings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:var(--bs-primary);border-width:1.5px}.changed-settings[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--bs-primary);font-weight:700}\"]\n  });\n  return TemplateComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}