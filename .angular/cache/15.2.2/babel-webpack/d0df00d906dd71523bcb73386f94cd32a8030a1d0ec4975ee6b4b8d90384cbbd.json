{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport { DeviceDetectorService } from 'ngx-device-detector';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-device-detector\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"./directory/directory.gallery.component\";\nfunction DirectoriesComponent_app_gallery_directory_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-gallery-directory\", 1);\n  }\n  if (rf & 2) {\n    const directory_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"directory\", directory_r1)(\"size\", ctx_r0.size);\n  }\n}\nexport let DirectoriesComponent = /*#__PURE__*/(() => {\n  class DirectoriesComponent {\n    constructor(container, deviceService) {\n      this.container = container;\n      this.deviceService = deviceService;\n      this.isDesktop = this.deviceService.isDesktop();\n    }\n    ngOnChanges() {\n      this.updateSize();\n    }\n    onResize() {\n      this.updateSize();\n    }\n    updateSize() {\n      if (!this.container?.nativeElement?.clientWidth) {\n        return;\n      }\n      const directoryMargin = 2; // 2px margin on both sides\n      const containerWidth = this.container.nativeElement.clientWidth - 1; // the browser sometimes makes some rounding error. Sacrifice 1px to make that error up.\n      if (!this.isDesktop && window.innerWidth < window.innerHeight) {\n        // On portrait mode, show 2 directories side by side with some padding\n        this.size = Math.floor(containerWidth / 2 - directoryMargin * 2);\n      } else {\n        const targetSize = 220 + directoryMargin;\n        this.size = Math.floor(containerWidth / Math.round(containerWidth / targetSize) - directoryMargin * 2);\n      }\n    }\n  }\n  DirectoriesComponent.ɵfac = function DirectoriesComponent_Factory(t) {\n    return new (t || DirectoriesComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.DeviceDetectorService));\n  };\n  DirectoriesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DirectoriesComponent,\n    selectors: [[\"app-gallery-directories\"]],\n    hostBindings: function DirectoriesComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function DirectoriesComponent_resize_HostBindingHandler() {\n          return ctx.onResize();\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    inputs: {\n      directories: \"directories\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 1,\n    vars: 1,\n    consts: [[3, \"directory\", \"size\", 4, \"ngFor\", \"ngForOf\"], [3, \"directory\", \"size\"]],\n    template: function DirectoriesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, DirectoriesComponent_app_gallery_directory_0_Template, 1, 2, \"app-gallery-directory\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngForOf\", ctx.directories);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.GalleryDirectoryComponent],\n    styles: [\"app-gallery-directory[_ngcontent-%COMP%]{margin:2px;display:inline-block}\"]\n  });\n  return DirectoriesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}