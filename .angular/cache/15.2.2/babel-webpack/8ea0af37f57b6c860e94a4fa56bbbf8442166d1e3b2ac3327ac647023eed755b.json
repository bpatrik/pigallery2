{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Config } from '../../../../../../common/config/public/Config';\nimport { MediaDTOUtils } from '../../../../../../common/entities/MediaDTO';\nimport { Utils } from '../../../../../../common/Utils';\nimport { QueryService } from '../../../../model/query.service';\nimport { MapService } from '../../map/map.service';\nimport { SearchQueryTypes, TextSearchQueryMatchTypes } from '../../../../../../common/entities/SearchQueryDTO';\nimport { AuthenticationService } from '../../../../model/network/authentication.service';\nimport { marker, tileLayer } from 'leaflet';\nimport { ContentService } from '../../content.service';\nimport { ThemeService } from '../../../../model/theme.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../model/query.service\";\nimport * as i2 from \"../../content.service\";\nimport * as i3 from \"../../map/map.service\";\nimport * as i4 from \"../../../../model/network/authentication.service\";\nimport * as i5 from \"../../../../model/theme.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/router\";\nimport * as i8 from \"@asymmetrik/ngx-leaflet\";\nimport * as i9 from \"../../../../pipes/DurationPipe\";\nimport * as i10 from \"../../../../pipes/FileSizePipe\";\nconst _c2 = function (a1) {\n  return [\"/gallery\", a1];\n};\nfunction InfoPanelLightboxComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"span\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9)(4, \"a\", 17);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"title\", ctx_r0.DirectoryPath);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c2, ctx_r0.DirectoryPath))(\"queryParams\", ctx_r0.queryService.getParams());\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.DirectoryPathStr, \" \");\n  }\n}\nfunction InfoPanelLightboxComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.calcMpx(), \"MP\");\n  }\n}\nfunction InfoPanelLightboxComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"fileSize\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, ctx_r2.media.metadata.fileSize));\n  }\n}\nfunction InfoPanelLightboxComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"span\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9)(4, \"div\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 11)(8, \"div\", 19);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(6, 2, ctx_r3.media.metadata.creationDate, ctx_r3.isThisYear() ? \"MMMM d\" : \"longDate\", \"UTC\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(10, 6, ctx_r3.media.metadata.creationDate, \"EEEE, HH:mm:ss\", \"UTC\"));\n  }\n}\nfunction InfoPanelLightboxComponent_div_18_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelementContainerStart(1);\n    i0.ɵɵi18n(2, 23);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"duration\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" : \", i0.ɵɵpipeBind1(4, 1, ctx_r10.VideoData.duration), \"\");\n  }\n}\nfunction InfoPanelLightboxComponent_div_18_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" fps: \", ctx_r11.VideoData.fps, \"/s \");\n  }\n}\nfunction InfoPanelLightboxComponent_div_18_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelementContainerStart(1);\n    i0.ɵɵi18n(2, 24);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"fileSize\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" : \", i0.ɵɵpipeBind1(4, 1, ctx_r12.VideoData.bitRate), \"/s \");\n  }\n}\nfunction InfoPanelLightboxComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"span\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9)(4, \"div\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 11);\n    i0.ɵɵtemplate(7, InfoPanelLightboxComponent_div_18_div_7_Template, 5, 3, \"div\", 21);\n    i0.ɵɵtemplate(8, InfoPanelLightboxComponent_div_18_div_8_Template, 2, 1, \"div\", 21);\n    i0.ɵɵtemplate(9, InfoPanelLightboxComponent_div_18_div_9_Template, 5, 3, \"div\", 21);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", \"Video\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.VideoData.duration);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.VideoData.fps);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.VideoData.bitRate);\n  }\n}\nfunction InfoPanelLightboxComponent_div_19_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"ISO\", ctx_r13.CameraData.ISO, \"\");\n  }\n}\nfunction InfoPanelLightboxComponent_div_19_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"f/\", ctx_r14.CameraData.fStop, \"\");\n  }\n}\nfunction InfoPanelLightboxComponent_div_19_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r15.toFraction(ctx_r15.CameraData.exposure), \"s \");\n  }\n}\nfunction InfoPanelLightboxComponent_div_19_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r16.CameraData.focalLength, \"mm \");\n  }\n}\nfunction InfoPanelLightboxComponent_div_19_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r17.CameraData.lens);\n  }\n}\nfunction InfoPanelLightboxComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"span\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9)(4, \"div\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 11);\n    i0.ɵɵtemplate(7, InfoPanelLightboxComponent_div_19_div_7_Template, 2, 1, \"div\", 26);\n    i0.ɵɵtemplate(8, InfoPanelLightboxComponent_div_19_div_8_Template, 2, 1, \"div\", 26);\n    i0.ɵɵtemplate(9, InfoPanelLightboxComponent_div_19_div_9_Template, 2, 1, \"div\", 26);\n    i0.ɵɵtemplate(10, InfoPanelLightboxComponent_div_19_div_10_Template, 2, 1, \"div\", 26);\n    i0.ɵɵtemplate(11, InfoPanelLightboxComponent_div_19_div_11_Template, 2, 1, \"div\", 27);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.CameraData.model || ctx_r5.CameraData.make || \"Camera\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.CameraData.ISO);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.CameraData.fStop);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.CameraData.exposure);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.CameraData.focalLength);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.CameraData.lens);\n  }\n}\nfunction InfoPanelLightboxComponent_div_20_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 34);\n  }\n}\nfunction InfoPanelLightboxComponent_div_20_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 35);\n  }\n}\nconst _c7 = function () {\n  return [];\n};\nfunction InfoPanelLightboxComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 29);\n    i0.ɵɵelement(2, \"span\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9)(4, \"div\", 31);\n    i0.ɵɵtemplate(5, InfoPanelLightboxComponent_div_20_span_5_Template, 1, 0, \"span\", 32);\n    i0.ɵɵtemplate(6, InfoPanelLightboxComponent_div_20_span_6_Template, 1, 0, \"span\", 33);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"title\", ctx_r6.Rating + \" stars\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(3, _c7).constructor(ctx_r6.Rating));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(4, _c7).constructor(5 - ctx_r6.Rating));\n  }\n}\nfunction InfoPanelLightboxComponent_div_21_ng_template_4_a_0_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"#\");\n  }\n}\nfunction InfoPanelLightboxComponent_div_21_ng_template_4_a_0_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 44);\n  }\n}\nconst _c8 = function (a1) {\n  return [\"/search\", a1];\n};\nfunction InfoPanelLightboxComponent_div_21_ng_template_4_a_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 42);\n    i0.ɵɵtemplate(1, InfoPanelLightboxComponent_div_21_ng_template_4_a_0_ng_template_1_Template, 1, 0, \"ng-template\", 43);\n    i0.ɵɵtemplate(2, InfoPanelLightboxComponent_div_21_ng_template_4_a_0_ng_template_2_Template, 1, 0, \"ng-template\", 43);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const keyword_r23 = i0.ɵɵnextContext().$implicit;\n    const ctx_r25 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c8, ctx_r25.getTextSearchQuery(keyword_r23.value, keyword_r23.type)))(\"ngSwitch\", keyword_r23.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", ctx_r25.SearchQueryTypes.keyword);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", ctx_r25.SearchQueryTypes.person);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(keyword_r23.value);\n  }\n}\nfunction InfoPanelLightboxComponent_div_21_ng_template_4_span_1_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"#\");\n  }\n}\nfunction InfoPanelLightboxComponent_div_21_ng_template_4_span_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 44);\n  }\n}\nfunction InfoPanelLightboxComponent_div_21_ng_template_4_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 45);\n    i0.ɵɵtemplate(1, InfoPanelLightboxComponent_div_21_ng_template_4_span_1_ng_template_1_Template, 1, 0, \"ng-template\", 43);\n    i0.ɵɵtemplate(2, InfoPanelLightboxComponent_div_21_ng_template_4_span_1_ng_template_2_Template, 1, 0, \"ng-template\", 43);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const keyword_r23 = i0.ɵɵnextContext().$implicit;\n    const ctx_r26 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngSwitch\", keyword_r23.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", ctx_r26.SearchQueryTypes.keyword);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", ctx_r26.SearchQueryTypes.person);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(keyword_r23.value);\n  }\n}\nfunction InfoPanelLightboxComponent_div_21_ng_template_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \", \");\n  }\n}\nfunction InfoPanelLightboxComponent_div_21_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, InfoPanelLightboxComponent_div_21_ng_template_4_a_0_Template, 4, 7, \"a\", 39);\n    i0.ɵɵtemplate(1, InfoPanelLightboxComponent_div_21_ng_template_4_span_1_Template, 4, 4, \"span\", 40);\n    i0.ɵɵtemplate(2, InfoPanelLightboxComponent_div_21_ng_template_4_ng_template_2_Template, 1, 0, \"ng-template\", 41);\n  }\n  if (rf & 2) {\n    const last_r24 = ctx.last;\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.searchEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r22.searchEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !last_r24);\n  }\n}\nfunction InfoPanelLightboxComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"span\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 37);\n    i0.ɵɵtemplate(4, InfoPanelLightboxComponent_div_21_ng_template_4_Template, 3, 3, \"ng-template\", 38);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.keywords);\n  }\n}\nfunction InfoPanelLightboxComponent_div_22_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r34 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r34.PositionData.GPSData.latitude.toFixed(6), \", \", ctx_r34.PositionData.GPSData.longitude.toFixed(6), \" \");\n  }\n}\nfunction InfoPanelLightboxComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"span\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 9)(4, \"div\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, InfoPanelLightboxComponent_div_22_div_6_Template, 3, 2, \"div\", 47);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.getPositionText() || \"Position\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.hasGPS());\n  }\n}\nconst _c9 = function (a0, a1) {\n  return {\n    lat: a0,\n    lng: a1\n  };\n};\nconst _c10 = function (a0) {\n  return [a0];\n};\nconst _c11 = function (a1, a2) {\n  return {\n    zoom: 10,\n    center: a1,\n    layers: a2,\n    zoomControl: false\n  };\n};\nfunction InfoPanelLightboxComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 48);\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"leafletOptions\", i0.ɵɵpureFunction2(7, _c11, i0.ɵɵpureFunction2(2, _c9, ctx_r9.PositionData.GPSData.latitude, ctx_r9.PositionData.GPSData.longitude), i0.ɵɵpureFunction1(5, _c10, ctx_r9.baseLayer)))(\"leafletLayers\", ctx_r9.markerLayer);\n  }\n}\nexport let InfoPanelLightboxComponent = /*#__PURE__*/(() => {\n  class InfoPanelLightboxComponent {\n    constructor(queryService, galleryService, mapService, authService, themeService) {\n      this.queryService = queryService;\n      this.galleryService = galleryService;\n      this.mapService = mapService;\n      this.authService = authService;\n      this.themeService = themeService;\n      this.closed = new EventEmitter();\n      this.keywords = null;\n      this.SearchQueryTypes = SearchQueryTypes;\n      this.markerLayer = [];\n      this.mapEnabled = Config.Map.enabled;\n      this.searchEnabled = this.authService.canSearch();\n      if (this.themeService.darkMode.value) {\n        this.baseLayer = tileLayer(mapService.DarkMapLayer.url, {\n          attribution: mapService.ShortAttributions\n        });\n      } else {\n        this.baseLayer = tileLayer(mapService.MapLayer.url, {\n          attribution: mapService.ShortAttributions\n        });\n      }\n    }\n    get FullPath() {\n      return Utils.concatUrls(this.media.directory.path, this.media.directory.name, this.media.name);\n    }\n    get DirectoryPath() {\n      return Utils.concatUrls(this.media.directory.path, this.media.directory.name);\n    }\n    get DirectoryPathStr() {\n      const p = this.DirectoryPath;\n      if (p === '.') {\n        return $localize`Home`;\n      }\n      if (p.length > 25) {\n        return '...' + p.slice(-22);\n      }\n      return p;\n    }\n    get VideoData() {\n      if (typeof this.media.metadata.bitRate === 'undefined') {\n        return null;\n      }\n      return this.media.metadata;\n    }\n    get Rating() {\n      return this.media.metadata.rating;\n    }\n    get PositionData() {\n      return this.media.metadata.positionData;\n    }\n    get CameraData() {\n      return this.media.metadata.cameraData;\n    }\n    ngOnChanges() {\n      if (this.hasGPS()) {\n        this.markerLayer = [marker({\n          lat: this.PositionData.GPSData.latitude,\n          lng: this.PositionData.GPSData.longitude\n        })];\n      }\n    }\n    ngOnInit() {\n      const metadata = this.media.metadata;\n      if (metadata.keywords && metadata.keywords.length > 0 || metadata.faces && metadata.faces.length > 0) {\n        this.keywords = [];\n        if (Config.Faces.enabled) {\n          const names = (metadata.faces || []).map(f => f.name);\n          this.keywords = names.filter((name, index) => names.indexOf(name) === index).map(n => ({\n            value: n,\n            type: SearchQueryTypes.person\n          }));\n        }\n        this.keywords = this.keywords.concat((metadata.keywords || []).map(k => ({\n          value: k,\n          type: SearchQueryTypes.keyword\n        })));\n      }\n    }\n    isPhoto() {\n      return this.media && MediaDTOUtils.isPhoto(this.media);\n    }\n    calcMpx() {\n      return (this.media.metadata.size.width * this.media.metadata.size.height / 1000000).toFixed(2);\n    }\n    isThisYear() {\n      return new Date().getFullYear() === new Date(this.media.metadata.creationDate).getUTCFullYear();\n    }\n    toFraction(f) {\n      if (f > 1) {\n        return f;\n      }\n      return '1/' + Math.round(1 / f);\n    }\n    hasPositionData() {\n      return !!this.media.metadata.positionData && !!(this.media.metadata.positionData.city || this.media.metadata.positionData.state || this.media.metadata.positionData.country);\n    }\n    hasGPS() {\n      return !!(this.media.metadata.positionData && this.media.metadata.positionData.GPSData && this.media.metadata.positionData.GPSData.latitude && this.media.metadata.positionData.GPSData.longitude);\n    }\n    getPositionText() {\n      if (!this.media.metadata.positionData) {\n        return '';\n      }\n      let str = this.media.metadata.positionData.city || this.media.metadata.positionData.state || '';\n      if (str.length !== 0) {\n        str += ', ';\n      }\n      str += this.media.metadata.positionData.country || '';\n      return str;\n    }\n    close() {\n      this.closed.emit();\n    }\n    getTextSearchQuery(name, type) {\n      return JSON.stringify({\n        type,\n        matchType: TextSearchQueryMatchTypes.exact_match,\n        text: name\n      });\n    }\n  }\n  InfoPanelLightboxComponent.ɵfac = function InfoPanelLightboxComponent_Factory(t) {\n    return new (t || InfoPanelLightboxComponent)(i0.ɵɵdirectiveInject(i1.QueryService), i0.ɵɵdirectiveInject(i2.ContentService), i0.ɵɵdirectiveInject(i3.MapService), i0.ɵɵdirectiveInject(i4.AuthenticationService), i0.ɵɵdirectiveInject(i5.ThemeService));\n  };\n  InfoPanelLightboxComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InfoPanelLightboxComponent,\n    selectors: [[\"app-info-panel\"]],\n    inputs: {\n      media: \"media\"\n    },\n    outputs: {\n      closed: \"closed\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 25,\n    vars: 13,\n    consts: function () {\n      let i18n_0;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_314315645942131479$$SRC_FRONTEND_APP_UI_GALLERY_LIGHTBOX_INFOPANEL_INFO_PANEL_LIGHTBOX_GALLERY_COMPONENT_TS_1 = goog.getMsg(\"Info\");\n        i18n_0 = MSG_EXTERNAL_314315645942131479$$SRC_FRONTEND_APP_UI_GALLERY_LIGHTBOX_INFOPANEL_INFO_PANEL_LIGHTBOX_GALLERY_COMPONENT_TS_1;\n      } else {\n        i18n_0 = $localize`Info`;\n      }\n      let i18n_3;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_5602245631444655788$$SRC_FRONTEND_APP_UI_GALLERY_LIGHTBOX_INFOPANEL_INFO_PANEL_LIGHTBOX_GALLERY_COMPONENT_TS___4 = goog.getMsg(\"duration\");\n        i18n_3 = MSG_EXTERNAL_5602245631444655788$$SRC_FRONTEND_APP_UI_GALLERY_LIGHTBOX_INFOPANEL_INFO_PANEL_LIGHTBOX_GALLERY_COMPONENT_TS___4;\n      } else {\n        i18n_3 = $localize`duration`;\n      }\n      let i18n_5;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_593870536587305607$$SRC_FRONTEND_APP_UI_GALLERY_LIGHTBOX_INFOPANEL_INFO_PANEL_LIGHTBOX_GALLERY_COMPONENT_TS___6 = goog.getMsg(\"bit rate\");\n        i18n_5 = MSG_EXTERNAL_593870536587305607$$SRC_FRONTEND_APP_UI_GALLERY_LIGHTBOX_INFOPANEL_INFO_PANEL_LIGHTBOX_GALLERY_COMPONENT_TS___6;\n      } else {\n        i18n_5 = $localize`bit rate`;\n      }\n      return [[1, \"content\", \"d-flex\", \"flex-column\", \"bg-body\"], [1, \"modal-header\"], [1, \"modal-title\"], i18n_0, [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-2\"], [1, \"details-icon\", \"oi\", \"oi-image\"], [1, \"col-10\"], [1, \"details-main\"], [1, \"details-sub\", \"text-secondary\", \"row\"], [1, \"col-4\"], [\"class\", \"col-4\", 4, \"ngIf\"], [1, \"mt-auto\", 2, \"height\", \"400px\"], [\"id\", \"map\", \"leaflet\", \"\", 3, \"leafletOptions\", \"leafletLayers\", 4, \"ngIf\"], [1, \"details-icon\", \"oi\", \"oi-folder\"], [1, \"details-main\", \"dir-link\", 3, \"title\", \"routerLink\", \"queryParams\"], [1, \"details-icon\", \"oi\", \"oi-calendar\"], [1, \"col-12\"], [1, \"details-icon\", \"oi\", \"oi-video\"], [\"class\", \"col-6\", 4, \"ngIf\"], [1, \"col-6\"], i18n_3, i18n_5, [1, \"details-icon\", \"oi\", \"oi-camera-slr\"], [\"class\", \"col-3\", 4, \"ngIf\"], [\"class\", \"col-12\", 4, \"ngIf\"], [1, \"col-3\"], [\"title\", \"rating\", \"p18n-rating\", \"\", 1, \"col-2\"], [1, \"details-icon\", \"oi\", \"oi-star\"], [1, \"details-main\", \"mt-2\", 3, \"title\"], [\"class\", \"oi oi-star text-body me-1\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"oi oi-star text-body-tertiary me-1\", 4, \"ngFor\", \"ngForOf\"], [1, \"oi\", \"oi-star\", \"text-body\", \"me-1\"], [1, \"oi\", \"oi-star\", \"text-body-tertiary\", \"me-1\"], [1, \"details-icon\", \"oi\", \"oi-tags\"], [1, \"col-10\", \"keywords\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"routerLink\", \"ngSwitch\", 4, \"ngIf\"], [3, \"ngSwitch\", 4, \"ngIf\"], [3, \"ngIf\"], [3, \"routerLink\", \"ngSwitch\"], [3, \"ngSwitchCase\"], [1, \"oi\", \"oi-person\"], [3, \"ngSwitch\"], [1, \"details-icon\", \"oi\", \"oi-map-marker\"], [\"class\", \"details-sub text-secondary row\", 4, \"ngIf\"], [\"id\", \"map\", \"leaflet\", \"\", 3, \"leafletOptions\", \"leafletLayers\"]];\n    },\n    template: function InfoPanelLightboxComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n        i0.ɵɵi18n(3, 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function InfoPanelLightboxComponent_Template_button_click_4_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(5, InfoPanelLightboxComponent_div_5_Template, 6, 6, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7);\n        i0.ɵɵelement(8, \"span\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 9)(10, \"div\", 10);\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 11)(13, \"div\", 12);\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, InfoPanelLightboxComponent_div_15_Template, 2, 1, \"div\", 13);\n        i0.ɵɵtemplate(16, InfoPanelLightboxComponent_div_16_Template, 3, 3, \"div\", 13);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(17, InfoPanelLightboxComponent_div_17_Template, 11, 10, \"div\", 5);\n        i0.ɵɵtemplate(18, InfoPanelLightboxComponent_div_18_Template, 10, 4, \"div\", 5);\n        i0.ɵɵtemplate(19, InfoPanelLightboxComponent_div_19_Template, 12, 6, \"div\", 5);\n        i0.ɵɵtemplate(20, InfoPanelLightboxComponent_div_20_Template, 7, 5, \"div\", 5);\n        i0.ɵɵtemplate(21, InfoPanelLightboxComponent_div_21_Template, 5, 1, \"div\", 5);\n        i0.ɵɵtemplate(22, InfoPanelLightboxComponent_div_22_Template, 7, 2, \"div\", 5);\n        i0.ɵɵelementStart(23, \"div\", 14);\n        i0.ɵɵtemplate(24, InfoPanelLightboxComponent_div_24_Template, 1, 10, \"div\", 15);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.galleryService.isSearchResult());\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\" \", ctx.media.name, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate2(\"\", ctx.media.metadata.size.width, \" x \", ctx.media.metadata.size.height, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isPhoto());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.media.metadata.fileSize);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.media.metadata.creationDate);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.VideoData && (ctx.VideoData.duration || ctx.VideoData.bitRate));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.CameraData);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.Rating);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.keywords);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasPositionData());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasGPS() && ctx.mapEnabled);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i6.NgSwitch, i6.NgSwitchCase, i7.RouterLink, i8.LeafletDirective, i8.LeafletLayersDirective, i6.DatePipe, i9.DurationPipe, i10.FileSizePipe],\n    styles: [\".content[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.row[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding:10px}.details-icon[_ngcontent-%COMP%]{margin-top:.7rem;font-size:x-large}.details-main[_ngcontent-%COMP%]{font-size:x-large}.details-sub[_ngcontent-%COMP%]{padding:0;font-size:.875rem}.details-sub[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}.yaga-map[_ngcontent-%COMP%]{width:100%;height:100%}#map[_ngcontent-%COMP%]{width:100%;height:400px}.close[_ngcontent-%COMP%]{margin:0;font-size:1.2rem}.modal-header[_ngcontent-%COMP%]{padding:.4rem 1rem}.keywords[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], a.dir-link[_ngcontent-%COMP%]{--bs-text-opacity: 1;color:rgba(var(--bs-body-color-rgb),var(--bs-text-opacity))!important}.keywords[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, a.dir-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.keywords[_ngcontent-%COMP%]   .oi-person[_ngcontent-%COMP%]{margin-right:2px}\"]\n  });\n  return InfoPanelLightboxComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}