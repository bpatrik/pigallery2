{"ast":null,"code":"import _asyncToGenerator from \"E:/work/pigallery2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { SharingListService } from './sharing-list.service';\nimport { SettingsService } from '../settings.service';\nimport { Config } from '../../../../../common/config/public/Config';\nimport { Utils } from '../../../../../common/Utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./sharing-list.service\";\nimport * as i2 from \"../settings.service\";\nimport * as i3 from \"@angular/common\";\nfunction SharingsListComponent_ng_container_0_ng_container_7_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"a\", 11);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function SharingsListComponent_ng_container_0_ng_container_7_tr_14_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const share_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r5.deleteSharing(share_r4));\n    });\n    i0.ɵɵelement(13, \"span\", 13);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const share_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", ctx_r3.sharingUrl + share_r4.sharingKey, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(share_r4.sharingKey);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(share_r4.path);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(share_r4.creator.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 5, share_r4.expires));\n  }\n}\nfunction SharingsListComponent_ng_container_0_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"table\", 5)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵi18n(5, 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵi18n(7, 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵi18n(9, 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵi18n(11, 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"th\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, SharingsListComponent_ng_container_0_ng_container_7_tr_14_Template, 14, 7, \"tr\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.shares);\n  }\n}\nfunction SharingsListComponent_ng_container_0_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 14);\n    i0.ɵɵi18n(2, 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction SharingsListComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"h5\");\n    i0.ɵɵi18n(4, 3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 4);\n    i0.ɵɵelement(6, \"hr\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, SharingsListComponent_ng_container_0_ng_container_7_Template, 15, 1, \"ng-container\", 0);\n    i0.ɵɵtemplate(8, SharingsListComponent_ng_container_0_ng_container_8_Template, 3, 0, \"ng-container\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.shares && ctx_r0.shares.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.shares || ctx_r0.shares.length == 0);\n  }\n}\nexport let SharingsListComponent = /*#__PURE__*/(() => {\n  class SharingsListComponent {\n    constructor(sharingList, settingsService) {\n      this.sharingList = sharingList;\n      this.settingsService = settingsService;\n      this.shares = [];\n      this.sharingUrl = Utils.concatUrls(Config.Server.publicUrl, '/share') + '/';\n    }\n    ngOnInit() {\n      this.getSharingList();\n    }\n    get Enabled() {\n      return this.settingsService.settings.value.Sharing.enabled;\n    }\n    deleteSharing(sharing) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.sharingList.deleteSharing(sharing);\n        yield _this.getSharingList();\n      })();\n    }\n    getSharingList() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          _this2.shares = yield _this2.sharingList.getSharingList();\n        } catch (err) {\n          _this2.shares = [];\n          throw err;\n        }\n      })();\n    }\n  }\n  SharingsListComponent.ɵfac = function SharingsListComponent_Factory(t) {\n    return new (t || SharingsListComponent)(i0.ɵɵdirectiveInject(i1.SharingListService), i0.ɵɵdirectiveInject(i2.SettingsService));\n  };\n  SharingsListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SharingsListComponent,\n    selectors: [[\"app-settigns-sharings-list\"]],\n    decls: 1,\n    vars: 1,\n    consts: function () {\n      let i18n_0;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_2608815712321922387$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS__1 = goog.getMsg(\"Active shares\");\n        i18n_0 = MSG_EXTERNAL_2608815712321922387$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS__1;\n      } else {\n        i18n_0 = $localize`Active shares`;\n      }\n      let i18n_2;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_2176659033176029418$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___3 = goog.getMsg(\"Key\");\n        i18n_2 = MSG_EXTERNAL_2176659033176029418$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___3;\n      } else {\n        i18n_2 = $localize`Key`;\n      }\n      let i18n_4;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_7046259383943324039$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___5 = goog.getMsg(\"Folder\");\n        i18n_4 = MSG_EXTERNAL_7046259383943324039$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___5;\n      } else {\n        i18n_4 = $localize`Folder`;\n      }\n      let i18n_6;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_1043390381565182083$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___7 = goog.getMsg(\"Creator\");\n        i18n_6 = MSG_EXTERNAL_1043390381565182083$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___7;\n      } else {\n        i18n_6 = $localize`Creator`;\n      }\n      let i18n_8;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_8037476586059399916$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___9 = goog.getMsg(\"Expires\");\n        i18n_8 = MSG_EXTERNAL_8037476586059399916$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___9;\n      } else {\n        i18n_8 = $localize`Expires`;\n      }\n      let i18n_10;\n      if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n        /**\r\n         * @suppress {msgDescriptions}\r\n         */\n        const MSG_EXTERNAL_4433121578172373116$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___11 = goog.getMsg(\" No sharing was created. \");\n        i18n_10 = MSG_EXTERNAL_4433121578172373116$$SRC_FRONTEND_APP_UI_SETTINGS_SHARINGS_LIST_SHARINGS_LIST_COMPONENT_TS___11;\n      } else {\n        i18n_10 = $localize` No sharing was created. `;\n      }\n      return [[4, \"ngIf\"], [1, \"row\", \"mt-2\"], [1, \"col-auto\"], i18n_0, [1, \"col\"], [1, \"table\", \"table-hover\"], i18n_2, i18n_4, i18n_6, i18n_8, [4, \"ngFor\", \"ngForOf\"], [3, \"href\"], [1, \"btn\", \"btn-danger\", \"float-end\", 3, \"click\"], [\"aria-hidden\", \"true\", \"aria-label\", \"Delete\", 1, \"oi\", \"oi-trash\"], [1, \"panel-info\"], i18n_10];\n    },\n    template: function SharingsListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, SharingsListComponent_ng_container_0_Template, 9, 2, \"ng-container\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.Enabled);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i3.DatePipe]\n  });\n  return SharingsListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}